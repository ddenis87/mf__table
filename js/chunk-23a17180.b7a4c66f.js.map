{"version":3,"sources":["webpack:///./src/plugins/formattingView/formattingView.js","webpack:///./node_modules/core-js/modules/es.map.js","webpack:///./src/views/SpreadSheetPrint.vue?f90c","webpack:///src/views/SpreadSheetPrint.vue","webpack:///./src/views/SpreadSheetPrint.vue?13d5","webpack:///./src/views/SpreadSheetPrint.vue"],"names":["FORMATE_NUMBER_KEY","type","minFD","currency","currencyView","group","FORMATE_DATE_KEY","d","m","y","formate","value","formatString","prefix","suffix","representations","Map","undefined","includes","FUNCTION_TYPE","string","v","number","f","formatNumber","toString","replace","date","formatDate","boolean","field","r","get","choice","typeClear","split","formatMap","map","item","result","NaN","size","formatOptions","forEach","keyValue","key","console","log","formatFunction","Intl","NumberFormat","formatValue","format","has","Date","DateTimeFormat","formatBoolean","collection","collectionStrong","module","exports","init","this","arguments","length","render","_vm","_h","$createElement","_c","_self","attrs","columns","rows","cells","styles","staticRenderFns","name","components","SpreadSheet","data","rowCount","columnCount","computed","tableColumns","created","tableDocument","beforeDestroy","localStorage","removeItem","component"],"mappings":"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","file":"js/chunk-23a17180.b7a4c66f.js","sourcesContent":["const FORMATE_NUMBER_KEY = {\r\n  type: 'style',\r\n  minFD: 'minimumFractionDigits',\r\n  currency: 'currency',\r\n  currencyView: 'currencyDisplay',\r\n  group: 'useGrouping',\r\n};\r\n\r\nconst FORMATE_DATE_KEY = {\r\n  d: 'day',\r\n  m: 'month',\r\n  y: 'year',\r\n};\r\n\r\nexport default {\r\n  formate(\r\n    value,\r\n    {\r\n      type = 'string',\r\n      formatString = null,\r\n      prefix = null,\r\n      suffix = null,\r\n      representations = new Map(),\r\n    } = {},\r\n  ) {\r\n    // console.log(value);\r\n    if ([null, undefined, ''].includes(value)) return '';\r\n    const FUNCTION_TYPE = {\r\n      string: (v) => this.formatString(v),\r\n      number: (v, f) => this.formatNumber(v, f).toString().replace('.', ','),\r\n      date: (v, f) => this.formatDate(v, f),\r\n      boolean: (v) => v,\r\n      field: (v, f, r) => r.get(v) || '<#ССЫЛКА>',\r\n      choice: (v) => v,\r\n    };\r\n    const typeClear = type.split('.')[0];\r\n    const formatMap = (formatString) ? new Map(formatString.split('$').map((item) => item.split('='))) : new Map();\r\n    // console.log(representation);\r\n    let result = FUNCTION_TYPE[typeClear](value, formatMap, representations);\r\n    if (prefix) result = `${prefix}${result}`;\r\n    if (suffix) result = `${result}${suffix}`;\r\n    return result;\r\n  },\r\n\r\n  formatString(value) {\r\n    return value.toString().replace(/\\n/g, '<br/>');\r\n  },\r\n\r\n  formatNumber(value, formatMap) {\r\n    if (value === 0) return value;\r\n    if (!+value) return NaN;\r\n    if (!formatMap.size) return value;\r\n    const formatOptions = {};\r\n    formatMap.forEach((keyValue, key) => {\r\n      if (FORMATE_NUMBER_KEY[key]) formatOptions[FORMATE_NUMBER_KEY[key]] = keyValue;\r\n    });\r\n    console.log(formatOptions);\r\n    const formatFunction = new Intl.NumberFormat('ru', formatOptions);\r\n    let formatValue = formatFunction.format(value);\r\n    if (formatMap.has('positive') && value > 0) formatValue = `+${formatValue}`;\r\n    if (formatMap.has('color')) {\r\n      formatValue = `<span style=\"color: ${(value < 0) ? 'red' : 'green'}\">${formatValue}</span>`;\r\n    }\r\n    return formatValue;\r\n  },\r\n\r\n  formatDate(value, formatMap) {\r\n    if (new Date(value).toString() === 'Invalid Date') return null;\r\n    const formatOptions = {};\r\n    formatMap.forEach((keyValue, key) => {\r\n      if (FORMATE_DATE_KEY[key]) formatOptions[FORMATE_DATE_KEY[key]] = keyValue;\r\n    });\r\n    const formatFunction = new Intl.DateTimeFormat('ru', formatOptions);\r\n    const formatValue = formatFunction.format(new Date(value));\r\n    return formatValue;\r\n  },\r\n\r\n  formatBoolean(value, formatMap) {\r\n    let formatValue = value;\r\n    if (formatMap.has(value)) formatValue = formatMap.get(value);\r\n    return formatValue;\r\n  },\r\n};\r\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\nmodule.exports = collection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('spread-sheet',{attrs:{\"columns\":_vm.columns,\"rows\":_vm.rows,\"cells\":_vm.cells,\"styles\":_vm.styles,\"is-print-mode\":true}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <spread-sheet :columns=\"columns\"\r\n                :rows=\"rows\"\r\n                :cells=\"cells\"\r\n                :styles=\"styles\"\r\n                :is-print-mode=\"true\"></spread-sheet>\r\n</template>\r\n\r\n<script>\r\nimport SpreadSheet from '@/components/SpreadSheet/SpreadSheet.vue';\r\n\r\nexport default {\r\n  name: 'SpreadSheetPrint',\r\n  components: {\r\n    SpreadSheet,\r\n  },\r\n  data() {\r\n    return {\r\n      rows: {},\r\n      rowCount: 0,\r\n      columns: {},\r\n      columnCount: 0,\r\n      cells: {},\r\n      styles: [],\r\n    };\r\n  },\r\n  computed: {\r\n    tableColumns() {\r\n      console.log(this.columns);\r\n      return this.columns;\r\n    },\r\n  },\r\n  created() {\r\n    const tableDocument = JSON.parse(localStorage.getItem('SpreadSheetTableDocument'));\r\n    if (!tableDocument) return;\r\n    ({\r\n      rows: this.rows = {},\r\n      rowColumn: this.rowColumn = 0,\r\n      columns: this.columns = {},\r\n      columnCount: this.columnCount = 0,\r\n      cells: this.cells = {},\r\n      styles: this.styles = [],\r\n    } = tableDocument);\r\n  },\r\n  beforeDestroy() {\r\n    localStorage.removeItem('dataPrint');\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpreadSheetPrint.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpreadSheetPrint.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SpreadSheetPrint.vue?vue&type=template&id=6f37846d&scoped=true&\"\nimport script from \"./SpreadSheetPrint.vue?vue&type=script&lang=js&\"\nexport * from \"./SpreadSheetPrint.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f37846d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}